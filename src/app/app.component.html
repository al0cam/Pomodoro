<div
  class="min-h-screen bg-gradient-to-br from-indigo-500 to-purple-600 flex flex-col items-center justify-center py-10 px-4 font-inter text-gray-200">
  <div class="card bg-base-100 shadow-xl rounded-3xl p-8 max-w-2xl w-full">
    <!-- Pomodoro Timer Section -->
    <div class="card-body text-center mb-8">
      <h1 class="text-4xl md:text-5xl font-extrabold text-primary mb-6">Pomodoro</h1>

      <!-- Mode Selector Buttons -->
      <div class="flex justify-center space-x-3 mb-6">
        <button (click)="switchMode('pomodoro')" class="btn btn-sm sm:btn-md rounded-full font-semibold"
          [ngClass]="{'btn-primary': timerMode() === 'pomodoro', 'btn-ghost text-gray-700': timerMode() !== 'pomodoro'}">
          Pomodoro
        </button>
        <button (click)="switchMode('shortBreak')" class="btn btn-sm sm:btn-md rounded-full font-semibold"
          [ngClass]="{'btn-primary': timerMode() === 'shortBreak', 'btn-ghost text-gray-700': timerMode() !== 'shortBreak'}">
          Short Break
        </button>
        <button (click)="switchMode('longBreak')" class="btn btn-sm sm:btn-md rounded-full font-semibold"
          [ngClass]="{'btn-primary': timerMode() === 'longBreak', 'btn-ghost text-gray-700': timerMode() !== 'longBreak'}">
          Long Break
        </button>
      </div>

      <!-- Timer Display -->
      <div class="text-7xl md:text-8xl font-bold text-primary mb-6 tracking-tight">
        {{ formattedTime() }}
      </div>

      <!-- Timer Control Buttons -->
      <div class="flex justify-center space-x-4">
        <button (click)="toggleTimer()" class="btn btn-lg rounded-full text-white font-bold text-lg shadow-lg"
          [ngClass]="{'btn-error': isActive(), 'btn-success': !isActive()}">
          {{ isActive() ? 'Pause' : 'Start' }}
        </button>
        <button (click)="resetTimer()"
          class="btn btn-lg rounded-full btn-warning text-white font-bold text-lg shadow-lg">
          Reset
        </button>
      </div>
    </div>

    <!-- Task List Section -->
    <hr class="my-8 border-t-2 border-base-200" />

    <h2 class="text-3xl font-bold text-primary mb-6 text-center">Your Tasks</h2>

    <!-- Add New Task Form -->
    <form (ngSubmit)="handleAddTask()" class="mb-8 p-4 bg-base-200 rounded-lg shadow-inner">
      <input type="text" placeholder="Task Title (e.g., Finish report)" [(ngModel)]="newTaskTitle" name="newTaskTitle"
        class="input input-bordered input-primary w-full p-3 mb-3 focus:outline-none focus:ring-2 focus:ring-primary"
        required />
      <textarea placeholder="Task Description (optional)" [(ngModel)]="newTaskDesc" name="newTaskDesc" rows="2"
        class="textarea textarea-bordered textarea-primary w-full p-3 mb-3 focus:outline-none focus:ring-2 focus:ring-primary resize-y"></textarea>
      <input type="number" placeholder="Estimated Pomodoros (e.g., 2)" [(ngModel)]="newTaskEstimatedPomodoros"
        name="newTaskEstimatedPomodoros" min="1"
        class="input input-bordered input-primary w-full p-3 mb-4 focus:outline-none focus:ring-2 focus:ring-primary" />
      <button type="submit" class="btn btn-primary w-full text-white font-bold py-3 px-4 shadow-md">
        Add Task
      </button>
    </form>

    <!-- Task List Display -->
    <div class="space-y-4">
      <p *ngIf="sortedTasks().length === 0" class="text-center text-gray-500 text-lg py-8">No tasks yet! Add one above
        to get started.</p>
      <app-task-item *ngFor="let task of sortedTasks(); trackBy: trackById" [task]="task"
        (toggleCompletion)="toggleTaskCompletion($event)" (toggleExpansion)="toggleTaskExpansion($event)"
        (deleteTask)="deleteTask($event)"></app-task-item>
    </div>
  </div>
</div>
